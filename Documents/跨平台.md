#[solo]imTime跨平台项目经验分享——跨平台

##为跨平台而生

imTime为跨平台而生，在计划改版的时候，我最主要的目的，就是想用一种主要的语言实现能运行在所有平台上。在还没有开始之前的相当长的时间内，我就对Javascript的跨平台性进行过零散的研究。iPhone上的混合开发我是做得最久的，也算是颇有一番经历了。

对于桌面版本的客户端，我想过用XULRunner的方式实现，但后来发现XUL实现的成本太高了。Adobe AIR当然是一种不错的解决方案，但用户必需要安装AIR的环境，这让我很不爽。我希望有有一种解决方案，对于用户来说是不可见的。用户只需要下载exe或dmg的安装包，双击直接安装就可以了。

后来做iOS上的混合开发，我觉得在Mac平台上，Web+UIWebView是一个非常不错的方案，并且我有这个解决方案的代码累积。用户我开发的imBox框架与Hummer，几乎可以获得与Native一样的用户体验。包括我想实现在Mac的状态栏下快速输入日程都可以解决。

Web+UIWebView的方案是可以提交到Mac App Store的，因为苹果限制到Mac App Store上的程序在沙箱中运行，混合开发的App反而更有优势。因为sandbox就是限制程序运行的权限，这正是Web的弱项，既然限制了，大家都到同一水平线上了。

### 能跨多少个平台

我做了一个图，把哪些平台上可以用Busy，什么设备用哪种方式接入到imTime全都列出来。我数了一下，一共有三十多个平台或设备，当然你可再浓缩一下。

![imTime的多平台支持示意图](http://iove.net/upload/imtime/multi_platform_mini.png)

[点击可以查看大图](http://iove.net/upload/imtime/multi_platform.png)

目前已经初步实现的包括iOS/PC网站/Chrome扩展/Safari扩展/手机网站/平板网站。在开发期间，我经历过两次大的重构，第一次是兼容浏览器插件的时候，第二次是兼容手机的时候。特别是在兼容手机的时候要改动的地方比较多，还幸运的是，因为架构良好，最终解决问题还是蛮轻松的。

根据目前的情况以及我对其它平台的了解，接下来要开发到其它平台已经非常容易了，Javascript要修改的地方已经比较少了，更多的是CSS的兼容性。Windows 8上要动的内容可能会多一些，邮件或者机器人功能那是另一个项目了，实际上和跨平台关系并不太大。

比如容易的像浏览器的插件和第三方接入，需要花一点时间去研究他们的API，主要就是OAuth的API，当然如果有导入/导出日程的话，那又是另一种功能了。Anddroid上的混合开发需要的时间会多一些，因为我手头上没有累积的代码。

