#[solo]imTime跨平台项目经验分享——架构前的分析 

很明显，[imTime](http://www.imtime.com)的架构设计就是为了跨平台，它集合了我写过的两个小框架，比如说在Objective上imCore和imBox，以及Hummer。无论是在imTime的架构，还是在独立框架的设计当中，大家可以看到，跨平台都是重中之重。几乎每一行Javascript代码都会考虑到跨平台，我在写代码的时候，都会想到在手机上怎么以运行，在浏览器插件中怎么运行，在服务器会怎么样。

##产品主要特点

做系统架构一定要对产品有足够的了解，你必需明白你的产品的重要特别是什么，imTime的特点如下：

1. 跨平台，三屏兼容
2. 多国语言，本地化
3. 第三方站内应用，像Facebook
4. 提供API，所以要求支持OAuth

##分析用户的接入方式

了解产品特点后，我们再来分析用户的接入方式。你必需要了解你的用户会用哪些设备来使用你的产品，它们都有什么共性。我的目标是覆盖主流平台与设备，对于IE6不放弃，但不在IE6上花太多的功夫。对于像S60这类系统，我认为它们将要消亡，比IE6还要死得快，所以完全不考虑了。我将用户的接入方式分为4种，除了常规的三屏之外 ，还有一种其它方式。先看图，然后我们具体分析。

![imTime架构思维导图](http://iove.net/upload/imtime/how_use_mini.png)
[点击可以看大图](http://iove.net/upload/imtime/how_use.png)

###平板设备 

其实平板设备也是一种移动设备 ，它和智能手机有一定的共性，但又显著不同，我们可以将它看作为桌面设备与移动设备中间的产物，在架构的时候需要特别对待。

首先看设备大小，设备的大小对应用的界面和代码都会产生很大的影响，就设备大小来看，平板和桌面设备很像，一般都是768(iPad竖屏的时候)以上的宽度，1024。所以在界面设计上，应该和桌面设备尽量靠拢。

再看和手机相似的地方，平板设备都是触摸屏设备，这点和桌面设备不一样，触摸屏的精度比较低，要求大按钮，并且触发区域之间不能间隔太小。

事实上还有很多细分，比如说平板网站和混合开发的又不一样，混合开发的可控性强，用户体验相对较高，还会有Sqlite的离线存储等。同样对于平板，我们又要分出Android/Windows/iOS三种平板类型。对于Kindle这种用户量大的产品，还需要另行处理。

###桌面设备 

桌面设备主要分为3种情况——网站、客户端、浏览器扩展。网站主要有两种情况，一是主站[imTime](http://www.imtime.com)，这个没有什么好讲的了，做网站的都明白，主要是要兼容各种浏览器，基本上从CSS上就能解决问题，重点要啃的是IE特别是IE6。但网站还包括第三方平台的站内应用，如Facebook和百度应用、Q+之类的。

客户端，客户端主要是用混合开发技术，这个和平板设备及智能机的混合开发存在着共性，在[imTime](http://www.imtime.com)的项目中，混合开发都会和imBox有关，它们之间会存在一些交互协议。客户端主要分为AIR和WebKit混合开发两种情况。AIR又有一些特殊，因为Adobe公司自己实现了一套东西。

###移动设备 

移动设备，准确地说应该是智能手机机设备。三大主流操作系统和Firefox OS，还有智能机网站及Wap网站。三屏中最需要特殊对待的是手机了，屏幕很小，性能要差一些。对于非智能机，我暂时没有考虑，但如果有机会，我会考虑给他们一个简单的网站。手机的各种适配非常复杂， 主要是Android手机的产品线比较乱，另外，Windows Phone上的IE10对CSS3的支持也一个大问题。还包括各种浏览器对界面的解析能力不一样等等。